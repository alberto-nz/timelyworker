<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Documentos</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="main.css" />
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth__es.js"></script>
    <link
      type="text/css"
      rel="stylesheet"
      href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css"
    />
    <script defer src="/__/firebase/9.13.0/firebase-app-compat.js"></script>
    <script defer src="/__/firebase/9.13.0/firebase-auth-compat.js"></script>
    <script
      defer
      src="/__/firebase/9.13.0/firebase-database-compat.js"
    ></script>
    <script defer src="/__/firebase/init.js?useEmulator=true"></script>
  </head>
  <body>
    <h1>Administraci√≥n</h1>
    <div id="sign-in-status"></div>
    <button id="sign-in" onclick="signout()">
      SingOut
    </button>
    <pre id="account-details"></pre>
    <div class="row">
      <div class="col-6">
        <h3>EMAILS</h3>
        <ul id="email"></ul>
      </div>
      <div class="col-6">
        <h3>NOMBRES</h3>
        <ul id="name"></ul>
      </div>
    </div>
    <script type="text/javascript">
      initApp = function() {
        firebase.auth().onAuthStateChanged(
          function(user) {
            if (user) {
              // User is signed in.
              var displayName = user.displayName;
              var email = user.email;
              var emailVerified = user.emailVerified;
              var photoURL = user.photoURL;
              var uid = user.uid;
              var phoneNumber = user.phoneNumber;
              var providerData = user.providerData;
              user.getIdToken().then(function(accessToken) {
                document.getElementById("sign-in-status").textContent =
                  "Signed in";
                // document.getElementById("sign-in").textContent = "Sign out";
                document.getElementById(
                  "account-details"
                ).textContent = JSON.stringify(
                  {
                    displayName: displayName,
                    email: email,
                    emailVerified: emailVerified,
                    phoneNumber: phoneNumber,
                    photoURL: photoURL,
                    uid: uid,
                    accessToken: accessToken,
                    providerData: providerData
                  },
                  null,
                  "  "
                );
              });
            } else {
              // User is signed out.
              document.getElementById("sign-in-status").textContent =
                "Signed out";
              document.getElementById("sign-in").textContent = "Sign in";
              document.getElementById("account-details").textContent = "null";
            }
          },
          function(error) {
            console.log(error);
          }
        );
      };
      function signout() {
        firebase
          .auth()
          .signOut()
          .then(function() {
            console.log("Sign-out successful");
            window.location.href = "/index.html";
          })
          .catch(function(error) {
            // An error happened.
          });
      }

      window.addEventListener("load", function() {
        initApp();
      });
    </script>
    <script src="main.js"></script>
  </body>
</html>
