<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Demo-Firmas</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="main.css" />
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth__es.js"></script>
    <link
      type="text/css"
      rel="stylesheet"
      href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css"
    />
    <script defer src="/__/firebase/9.13.0/firebase-app-compat.js"></script>
    <script defer src="/__/firebase/9.13.0/firebase-auth-compat.js"></script>

    <script defer src="/__/firebase/init.js?useEmulator=true"></script>
  </head>
  <body>
    <h2 class="text-center mt-3">Login</h2>

    <div class="container-grid">
      <div id="firebaseui-auth-container"></div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const ui = new firebaseui.auth.AuthUI(firebase.auth());

        ui.start("#firebaseui-auth-container", {
          queryParameterForWidgetMode: "mode",
          queryParameterForSignInSuccessUrl: "signInSuccessUrl",
          signInSuccessUrl: "/dashboard.html",
          signInFlow: "popup",

          signInOptions: [
            {
              provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,
              requireDisplayName: true
            }
          ],
          callbacks: {
            signInSuccessWithAuthResult: function(
              currentUser,
              credential,
              redirectUrl
            ) {
              console.log(currentUser.email);
              window.location.href = "/dashboard.html";
              return true;
            }
          }
        });
      });
    </script>
  </body>
</html>
